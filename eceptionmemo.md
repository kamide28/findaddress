# Exception内容について

## 本家のAPIの仕様について

* ~~3から7桁の数字を入力するとそれにあった住所が出てくる~~
* ~~７桁でない時は途中までで完全に一致している住所が全て出てくる~~

→外部APIの仕様だとできないらしい、パラメータであるジップコードは７桁のみだった（仕様書を読み直した）

* 大量に複数件ある時はリクエストパラメータにlimitを追加することで上限を決めれる（デフォは20らしい）
* ７桁で入力しても町域が別名だったりすると複数の住所を返してくれる(0790177は二つ出てくる)
* 郵便番号自体は７桁（1998年かららしい、それまで５桁）
* 半角でも全角でも数字であれば受け付けてくれる
* 存在しない時は存在ししませんということと番号を確認くださいと出てくる
* 文字を入力すると入力に誤りがありますと出てくる

## 考えらる困った状況

### NullPointerException

基本リストに詰める時点でヌルポになってしまっている  
ステータスコードは500

* 住所が存在しなかった時
* ~~住所が複数存在した時（うまくマッピングできないから？？）~~
* ~~入力に文字や全角数字が送られた時~~

## 対応策

まずはリストにいくまでに対応できること  
~~<ins>入力チェック</ins>  
入力のようのzipcodeクラスを作りそこでバリテーションをつける  
０〜９以外の文字をはねる（正規表現とかで可能か？）  
本家と同じ３桁以上７桁以下しか入力できないようにする（@sizeとか）~~  
→バリデーションをつけて入力できるものを半角数字７桁のみに限定
<br />
~~<ins>住所が複数存在している時</ins>  
これはエラーとなっているのはこっちのミス  
例外処理ではなくクラスの内容を変えて複数合ったら複数で返せるようにする~~  
→仕様書読み直して解決、７桁限定だった、２個返ってくる住所も正常に作動確認OK
<br />
<br />
ここまできたら残っているのは本当に存在しなかった時だけのはず…。  
~~リストの前に分岐を作ってその時点でNULLだったら例外処理として飛ばし、エラーメッセージを表示させる~~  
→ifで分岐を作った

